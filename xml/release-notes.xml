<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
                 type="text/xml"
                 title="Profiling step"?>
<!DOCTYPE article
[
 <!ENTITY % myents SYSTEM "release-notes.ent" >
 %myents;
]>
<article xml:lang="en" xml:id="rnotes"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>&rnotes;</title>
 <info>
  <releaseinfo>&rversion;</releaseinfo>
  <productname>&thisflavor;</productname>
  <productnumber>&version;</productnumber>
  <date><?dbtimestamp format="Y-m-d"?></date>
  <abstract>
   <para>
    &thisflavor; is a free and Linux-based operating system for your PC, Laptop
    or Server. You can surf the Web, manage your e-mails and photos, do office
    work, play videos or music and have a lot of fun!
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:url>https://bugzilla.opensuse.org/enter_bug.cgi</dm:url>
    <dm:product>openSUSE Distribution</dm:product>
    <dm:component>Release Notes</dm:component>
    <dm:assignee>sknorr@suse.com</dm:assignee>
   </dm:bugtracker>
  </dm:docmanager>
 </info>

 <para condition="beta">
  This is the initial version of the release notes for the forthcoming
  &thisversion;.
 </para>
 <para condition="pre;maintained">
  The release notes are under constant development.
  To find out about the latest updates, see the online version at
  <link xlink:href="https://doc.opensuse.org/release-notes"/>.
  The English release notes are updated whenever need arises. Translated
  language versions can temporarily be incomplete.
 </para>
 <para condition="unmaintained">
  The end of the maintenance period for &thisversion; is now reached. To keep
  your systems up-to-date and secure, upgrade to a current &opensuse; version.
  Before starting the upgrade, make sure that all maintenance updates for
  &thisversion; are applied.
 </para>
 <para condition="unmaintained">
  For more information about upgrading to a current &opensuse; version, see
  <link xlink:href="http://en.opensuse.org/SDB:Distribution-Upgrade"/>.
 </para>
 <!-- Previous Release Notes -->
 <para>
  If you upgrade from an older version to this &thisflavor; release, see
  previous release notes listed here:
  <link xlink:href="http://en.opensuse.org/openSUSE:Release_Notes"/>.
 </para>
 <para>
  <phrase condition="beta">This public beta test is part of the &opensuse;
  project.</phrase> Information about the project is available at
  <link xlink:href="https://www.opensuse.org"/>.
 </para>
 <para condition="beta;pre">
  Report all bugs you encounter using this prerelease of &thisflavor; &version;
  in the &opensuse; Bugzilla. For more information, see
  <link xlink:href="http://en.opensuse.org/Submitting_Bug_Reports"/>. If you
  would like to see anything added to the release notes, file a bug
  report against the component <quote>Release Notes</quote>.
 </para>
 <para condition="maintained">
  To report bugs against this release, use the &opensuse; Bugzilla. For more
  information, see
  <link xlink:href="http://en.opensuse.org/Submitting_Bug_Reports"/>.
 </para>
 <para condition="pre;maintained">
  Major new features of &thisversion; are also listed at
  <link xlink:href="https://en.opensuse.org/Features_15.0"/>.
 </para>

 <sect1 xml:id="installation">
  <title>Installation</title>

  <para>
   This section contains installation-related notes. For detailed upgrade
   instructions, see the documentation at
   <link xlink:href="https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/part.basics.html"/>.
  </para>
  <para>
   Make sure to also review <xref linkend="sec.driver"/>.
  </para>

  <sect2 xml:id="sec.install.transactional-server-role">
   <title>Using Atomic Updates With the New System Role <emphasis>Transactional Server</emphasis></title>
   <!-- boo#1092953, boo#1093098 -->
   <para>
    The installer now supports a new system role
    <emphasis>Transactional Server</emphasis> that is an outcome of the
    &kubic; effort. This system role features a new update system that
    applies updates atomically (as a single operation) and makes them easy to
    revert should that become necessary.
    These features are based on the package management tools that all
    other &suse; and &osuse; distributions also rely on. This means that the
    vast majority of RPM
    packages that work with other system roles of &thisversion; also work
    with the system role <emphasis>Transactional Server</emphasis>.
   </para>
   <note>
    <title>Incompatible Packages</title>
    <para>
     Some packages modify the contents of <filename>/var</filename> or
     <filename>/srv</filename> in their RPM <literal>%post</literal> scripts.
     These packages are incompatible. If you happen upon such package, file a
     bug report.
    </para>
   </note>
   <para>
    To provide these features, this update system relies on:
   </para>
   <itemizedlist>
    <listitem>
     <formalpara>
      <title>Btrfs snapshots</title>
      <para>
       Before a system update is started, a new Btrfs snapshot of the root
       file system is created. Then, all the changes from the update are
       installed into that Btrfs snapshot. To complete the update, you can
       then restart the system into the new snapshot.
      </para>
     </formalpara>
     <para>
      To revert the update, simply boot from the previous snapshot instead.
     </para>
    </listitem>
    <listitem>
     <formalpara>
      <title>A read-only root file system</title>
      <para>
       To avoid issues with and data loss because of updates, the root file
       system must not be written to otherwise. Therefore, the root file
       system is mounted read-only during normal operation.
      </para>
     </formalpara>
     <para>
      To make this setup work, two additional changes to the file system
      needed to be made: To allow writing user configuration in
      <filename>/etc</filename>, this directory is automatically configured
      to use OverlayFS. <filename>/var</filename> is now a separate subvolume
      which can be written to by processes.
     </para>
    </listitem>
   </itemizedlist>
   <important>
    <title><emphasis>Transactional Server</emphasis> Needs At Least 12 GB of Disk Space</title>
    <para>
     The system role <emphasis>Transactional Server</emphasis> needs a disk
     size of at least 12 GB to accommodate Btrfs snapshots.
    </para>
   </important>
   <para>
    To work with transactional updates, always use the command
    <command>transactional-update</command> instead of &yast; and Zypper for
    all software management:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Update the system:
      <command>transactional-update up</command>
     </para>
    </listitem>
    <listitem>
     <para>
      Install a package:
      <command>transactional-update pkg in <replaceable>PACKAGE_NAME</replaceable></command>
     </para>
    </listitem>
    <listitem>
     <para>
      Remove a package:
      <command>transactional-update pkg rm <replaceable>PACKAGE_NAME</replaceable></command>
     </para>
    </listitem>
    <listitem>
     <para>
      To revert the last snapshot, that is the last set of changes to the
      root file system, make sure your system is booted into the next to last
      snapshot and run:
      <command>transactional-update rollback</command>
     </para>
     <para>
      Optionally, add a snapshot ID to the end of the command to rollback to
      a specific ID.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    When using this system role, by default, the system will perform a daily
    update and reboot between 03:30 am and 05:00 am. Both of these actions
    are systemd-based and if necessary can be disabled using
    <command>systemctl</command>:
   </para>
   <screen><prompt>tux@linux &gt; </prompt><command>sudo systemctl disable --now transactional-update.timer rebootmgr.service</command></screen>
   <para>
    For more information about transactional updates, see the &kubic; blog posts
    <link xlink:href="https://kubic.opensuse.org/blog/2018-04-04-transactionalupdates/"/>
    and
    <link xlink:href="https://kubic.opensuse.org/blog/2018-04-20-transactionalupdates2/"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec.install.minimalinstall">
   <!-- https://bugzilla.suse.com/show_bug.cgi?id=947712 -->
   <!-- https://bugzilla.opensuse.org/show_bug.cgi?id=951866 -->
   <!-- boo#1092056 -->
   <title>Minimal System Installation</title>
   <para>
    The minimal system installation lacks certain functionality that is often
    taken for granted:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      It does not contain a software firewall front-end. You can
      install the package <package>firewalld</package> additionally.
     </para>
    </listitem>
    <listitem>
     <para>
      It does not contain a YaST. You can install the pattern
      <package>patterns-yast-yast2_basis</package> additionally.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.install.small-disk">
   <title>Installing on Hard Disks With Less Than 12 GB of Capacity</title>
   <!-- boo#1093098 -->
   <para>
    The installer will only propose a partitioning scheme if the available
    hard disk size is larger than 12 GB. If you want to set up, for example,
    very small virtual machines images, use the guided partitioner to tune
    partitioning parameters manually.
   </para>
  </sect2>

  <sect2 xml:id="sec.install.uefi">
   <title>UEFI&mdash;Unified Extensible Firmware Interface</title>
   <para>
    Prior to installing &opensuse; on a system that boots using UEFI (Unified
    Extensible Firmware Interface), you are urgently advised to check for any
    firmware updates the hardware vendor recommends and, if available, to
    install such an update. A pre-installation of Windows 8 or later is a
    strong indication that your system boots using UEFI.
   </para>
   <para>
    <emphasis>Background:</emphasis> Some UEFI firmware has bugs that cause it
    to break if too much data gets written to the UEFI storage area. However,
    there is no clear data of how much is <quote>too much</quote>.
   </para>
   <para>
    &opensuse; minimizes the risk by not writing more than the bare minimum
    required to boot the OS. The minimum means telling the UEFI firmware about
    the location of the &opensuse; boot loader. Upstream Linux kernel features
    that use the UEFI storage area for storing boot and crash information
    (<literal>pstore</literal>) have been disabled by default. Nevertheless, it
    is recommended to install any firmware updates the hardware vendor
    recommends.
   </para>
  </sect2>

  <sect2 xml:id="sec.install.uefi-part">
  <!-- bnc#850056 -->
   <title>UEFI, GPT, and MS-DOS Partitions</title>
   <para>
    Together with the EFI/UEFI specification, a new style of partitioning
    arrived: GPT (GUID Partition Table). This new schema uses globally unique
    identifiers (128-bit values displayed in 32 hexadecimal digits) to identify
    devices and partition types.
   </para>
   <para>
    Additionally, the UEFI specification also allows legacy MBR (MS-DOS)
    partitions. The Linux boot loaders (ELILO or GRUB 2) try to automatically
    generate a GUID for those legacy partitions, and write them to the
    firmware. Such a GUID can change frequently, causing a rewrite in the
    firmware. A rewrite consists of two different operations: Removing the old
    entry and creating a new entry that replaces the first one.
   </para>
   <para>
    Modern firmware has a garbage collector that collects deleted entries and
    frees the memory reserved for old entries. A problem arises when faulty
    firmware does not collect and free those entries. This can result in a
    non-bootable system.
   </para>
   <para>
    To work around this problem, convert the legacy MBR partition to GPT.
   </para>
  </sect2>

  <sect2 xml:id="sec.install.hidpi">
   <!-- boo#1090240 -->
   <title>Scaling the Installer UI on Computers with High-DPI Displays</title>
   <para>
    The YaST installer does not scale its UI for High-DPI displays by default.
    If you have a computer with a high-DPI display, you can set YaST to scale
    its UI automatically for the display. To do so, add the parameter
    <literal>QT_AUTO_SCREEN_SCALE_FACTOR=1</literal> to the bootloader
    command line.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="upgrade">
  <title>System Upgrade</title>

  <para>
   This section lists notes related to upgrading the system. For detailed
   upgrade instructions, see the documentation at
   <link xlink:href="https://doc.opensuse.org/documentation/leap/startup/html/book.opensuse.startup/cha.update.osuse.html"/>.
  </para>
  <para>
   Make sure to also review <xref linkend="sec.driver"/>.
  </para>
  <para>
   Additionally, check <xref linkend="sec.package"/>.
  </para>

  <sect2 xml:id="sec.upgrade.423">
   <title>Upgrading from &opensuseleap; 42.3</title>
   <para/>

   <sect3 xml:id="sec.upgrade.package-downgrade">
    <!-- boo#1095597 -->
    <title>Package Downgrades During System Upgrade</title>
    <para>
     The RPM package information of packages shipped in &thisversion; contain
     an added &thisflavor; version string. For this reason, packages that
     contain the same upstream version of software as shipped in
     &thisflavor; 42.3 will be displayed as downgrades, even though they
     actually contain the same software but compiled for a newer operating
     system.
    </para>
   </sect3>

   <sect3 xml:id="sec.upgrade.cryptconfig">
    <!-- boo#1099004, boo#1095657, FATE#323541 -->
    <title><package>cryptconfig</package> Has Been Removed</title>
    <para>
     Previous versions of &thisflavor; supported encrypting home directories
     individually via <package>cryptconfig</package>. This feature and the
     <package>cryptconfig</package> package are not available anymore in
     &thisversion;.
    </para>
    <para>
     To encrypt user data on &thisversion;, encrypt the whole partition or
     volume which contains the home directories.
    </para>
    <tip>
     <title>Decrypt Before Upgrading</title>
     <para>
      Before performing an upgrade from &thisflavor; 42.3, encrypted home
      directory images need to be decrypted. Otherwise, users will not have
      access to them after the upgrade.
     </para>
    </tip>
   </sect3>

   <sect3 xml:id="sec.server.postfix-directory">
    <!-- boo#1091866 -->
    <title>Postfix Admin Uses Backwards-Incompatible Directory Layout</title>
    <para>
     Starting with the version 3.2, as shipped in &thisversion;,
     Postfix Admin (package <package>postfixadmin</package>) uses a new and
     backwards-incompatible directory layout:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       The configuration files moved to <filename>/etc/postfixadmin</filename>.
      </para>
     </listitem>
     <listitem>
      <para>
       The PHP code moved to <filename>/usr/share/postfixadmin</filename>.
      </para>
     </listitem>
     <listitem>
      <para>
       The Smarty cache moved to <filename>/var/cache/postfixadmin</filename>.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     Postfix Admin no longer reads configuration files from their
     previous locations and the configuration is not migrated automatically.
     Therefore, you need to migrate the following items manually:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       Move <filename>config.local.php</filename> from
       <filename>/srv/www/htdocs/postfixadmin</filename> to
       <filename>/etc/postfixadmin</filename>.
      </para>
     </listitem>
     <listitem>
      <para>
       If you made customizations to <filename>config.inc.php</filename>,
       ideally merge these customizations into
       <filename>/etc/postfixadmin/config.local.php</filename>.
       We recommended keeping <filename>config.inc.php</filename> unmodified.
      </para>
     </listitem>
     <listitem>
      <para>
       In the Apache configuration, add or enable the alias
       <literal>/postfixadmin</literal>:
      </para>
      <itemizedlist>
       <listitem>
        <para>
         To make the alias available on all virtual hosts, run:
        </para>
        <screen><prompt>tux@linux &gt; </prompt><command>sudo a2enflag POSTFIXADMIN &amp;&amp; rcapache2 restart</command></screen>
       </listitem>
       <listitem>
        <para>
         To make the alias available only on a specific virtual host only, add
         the alias to the config of that virtual host.
        </para>
       </listitem>
      </itemizedlist>
     </listitem>
    </itemizedlist>
   </sect3>

   <sect3 xml:id="sec.upgrade.encrypted-disk">
    <!-- boo#1097811, boo#1094963 -->
    <title>Offline Upgrade Fails When Encrypted Disks Are Mapped by Name</title>
    <para>
     Using the offline upgrade feature of the installation medium on a
     computer with an encrypted data partition, such as
     <filename>/home</filename>, can crash the &yast; installer when
     selecting the previous installation.
    </para>
    <para>
     This happens when the encrypted data partition is listed in
     <filename>/etc/fstab</filename> by device mapper name, such as
     <filename>/dev/mapper/cr_home</filename>. In the installation
     environment, &yast; cannot associate that path with an automatically
     detected volume.
    </para>
    <para>
     To be able to use the offline upgrade functionality, before starting the
     upgrade, change <filename>/etc/fstab</filename> to use device UUIDs
     instead of device names. To determine the correct device UUIDs, use the
     following command:
    </para>
    <screen><prompt>tux@linux &gt; </prompt><command>blkid | grep "<replaceable>DEVICE_MAPPER_NAME</replaceable>"</command></screen>
    <para>
     The output of this command will contain a quoted UUID after the string
     <literal>UUID=</literal>.
    </para>
   </sect3>

   <sect3 xml:id="sec.upgrade.gpg-database">
    <!-- boo#1093982 -->
    <title>GPG Has New Key Database Format</title>
    <para>
     &thisflavor; 42.3 shipped with GPG 2.0, while &thisversion; includes
     GPG 2.2. In between these GPG versions, a new key database format was
     introduced. GPG 2.2 will automatically upgrade your key ring to the new
     format. However, the upgraded key ring cannot be used by older versions
     of GPG anymore.
    </para>
    <para>
     If you need to keep the older version of your key database available,
     back up the directory <filename>~/.gnupg</filename> before starting the
     upgrade to &thisversion;.
    </para>
   </sect3>

  </sect2>

 </sect1>

 <sect1 xml:id="sec.package">
  <title>Packaging Changes</title>

  <sect2 xml:id="sec.package.deprecated">
   <title>Deprecated Packages</title>
   <para>
    Deprecated packages are still shipped as part of the distribution but are
    scheduled to be removed the next version of &thisflavor;. These packages
    exist to aid migration, but their use is discouraged and they may not
    receive updates.
   </para>

   <!-- <itemizedlist>
    <listitem>
     <para>
      <package>example</package>: Replaced by
      <package>example2</package>.
     </para>
    </listitem>
   </itemizedlist> -->

   <para>
    To check whether installed packages are no longer maintained: Make sure
    that <package>lifecycle-data-openSUSE</package> is installed, then use
    the command:
   </para>
   <screen><prompt>tux@linux &gt; </prompt><command>zypper lifecycle</command></screen>
  </sect2>

  <sect2 xml:id="sec.package.removed">
   <title>Removed Packages</title>
   <para>
    Removed packages are not shipped as part of the distribution anymore.
   </para>

   <itemizedlist>
    <listitem>
     <para>
      <!-- boo#1099004 -->
      <package>cryptconfig</package>: Was not maintained anymore. Use
      partition encryption instead. For more information, see
      <xref linkend="sec.upgrade.cryptconfig"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      <!-- boo#1102987 -->
      <package>SuSEfirewall2</package>: Replaced by
      <package>firewalld</package>. For information about migrating to
      <package>firewalld</package>, see
      <link xlink:href="https://en.opensuse.org/Firewalld"/> and
      <link xlink:href="https://doc.opensuse.org/documentation/leap/security/html/book.security/cha.security.firewall.html#sec.security.firewall.firewalld"/>.
     </para>
    </listitem>
    <listitem>
     <para>
      <!-- boo#1089061 -->
      <package>php7-imap</package>: The optional IMAP PHP extension is no
      longer shipped as the UW IMAP reference implementation is no longer
      maintained.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

 </sect1>

 <sect1 xml:id="sec.driver">
  <title>Drivers and Hardware</title>
  <para/>

  <sect2 xml:id="sec.driver.nvidia-hybrid">
   <!-- boo#1094834 -->
   <title>Hang on Machines with Nvidia GPUs and Hybrid Graphics</title>
   <para>
    With the kernel shipped in &thisflavor; 15.0 GM, the Nouveau driver for
    Nvidia graphics card may hang at reboot, shutdown, or during runtime power
    management actions. This bug occurs primarily on system with hybrid
    graphics, such as laptops that include integrated Intel graphics and a
    discrete Nvidia graphics card.
   </para>
   <para>
    The bug will be fixed in a maintenance update for the kernel. However, as
    the installation image does not receive updates, this issue may occur
    during installation or first boot even after that update has shipped.
    In that case, as a temporary workaround, boot with the option
    <literal>nouveau.modeset=0</literal>. After the updated kernel
    including the fix is installed, you can remove this option again.
   </para>
  </sect2>

  <sect2 xml:id="sec.desktop.kde-wayland-nvidia">
   <!-- boo#1090382 -->
   <title>KDE on Wayland Is Not Supported with Proprietary Nvidia Driver</title>
   <para>
    The KDE Plasma Wayland session is not supported with the proprietary
    Nvidia driver. If you are using KDE and the proprietary Nvidia
    driver, stay with the X session.
   </para>
  </sect2>

 </sect1>

 <sect1 xml:id="general">
  <title>Desktop</title>

  <para>
   This section lists desktop issues and changes in &thisversion;.
  </para>

  <!--  boo#1059438, boo#1062550 -->
  <sect2 xml:id="sec.general.compose-key">
   <title>No Default Compose Key Combination</title>
   <para>
    In previous versions of &os;, the compose key combination
    allowed typing characters that were not part of the regular keyboard layout.
    For example, to produce <quote>å</quote>, you could press and release
    <keycombo><keycap function="shift"/><keycap>Right Ctrl</keycap></keycombo>
    and then press <keycap>a</keycap> twice.
   </para>
   <para>
    In &thisversion;, there is no longer a predefined compose key combination
    because
    <keycombo><keycap function="shift"/><keycap>Right Ctrl</keycap></keycombo>
    does not work as expected anymore.
   </para>
   <itemizedlist>
    <listitem>
     <para>
      To define a system-wide custom compose key combination, use the file
      <filename>/etc/X11/Xmodmap</filename> and look for the following lines:
     </para>
<screen>[...]
!! Third example: Change right Control key to Compose key.
!! To do Compose Character, press this key and afterwards two
!! characters (e.g. `a' and `^' to get 342).
!remove  Control  = Control_R
!keysym Control_R = Multi_key
!add     Control  = Control_R
[...]</screen>
     <para>
      To uncomment the example code, remove the
      <literal>!</literal> characters at the beginning of lines. However,
      note that the setup from <filename>Xmodmap</filename> will be
      overwritten if you are using <command>setxkbmap</command>.
     </para>
    </listitem>
    <listitem>
     <para>
      To define a user-specific compose key combination, use your desktop's
      keyboard configuration tool or the command-line tool
      <command>setxkbmap</command>:
     </para>
     <screen>
<prompt>tux@linux &gt; </prompt><command>setxkbmap <replaceable>[...]</replaceable> -option compose:<replaceable>COMPOSE_KEY</replaceable></command>
     </screen>
     <para>
      For the variable <replaceable>COMPOSE_KEY</replaceable>, use your
      preferred character, for example
      <literal>ralt</literal>, <literal>lwin</literal>,
      <literal>rwin</literal>, <literal>menu</literal>,
      <literal>rctl</literal>, or <literal>caps</literal>.
     </para>
    </listitem>
    <listitem>
     <para>
      Alternatively, use an IBus input method that allows typing the
      characters you need without a Compose key.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.desktop.set-login-manager-session">
   <!-- boo#1091021 -->
   <title>Use <command>update-alternatives</command> to Set Login Manager and Desktop Session</title>
   <para>
    In the past, you could use <filename>/etc/sysconfig</filename> or the
    &yast; module <guimenu>/etc/sysconfig Editor</guimenu> to define the login
    manager and desktop session. Starting with &thisflavor; 15.0, the values
    are not defined using <filename>/etc/sysconfig</filename> anymore but
    with the alternatives system.
   </para>
   <para>
    To change the defaults, use the following alternatives:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Login manager: <literal>default-displaymanager</literal>
     </para>
    </listitem>
    <listitem>
     <para>
      Wayland session: <literal>default-waylandsession.desktop</literal>
     </para>
    </listitem>
    <listitem>
     <para>
      X desktop session: <literal>default-xsession.desktop</literal>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    For example, to check the value of
    <literal>default-displaymanager</literal>, use:
   </para>
<screen><prompt>tux@linux &gt; </prompt><command>sudo update-alternatives --display default-displaymanager</command></screen>
   <para>
    To switch the <literal>default-displaymanager</literal> to
    <command>xdm</command>, use:
   </para>
<screen><prompt>tux@linux &gt; </prompt><command>sudo update-alternatives --set default-displaymanager \
  /usr/lib/X11/displaymanagers/xdm</command></screen>
   <para>
    To enable graphical management of alternatives, use the &yast; module
    <guimenu>Alternatives</guimenu> that can be installed from the package
    <package>yast2-alternatives</package>.
   </para>
  </sect2>

  <sect2 xml:id="sec.general.gdm">
   <title>No Screen Lock When Using GNOME Shell But Not GDM</title>
   <para>
    When using GNOME Shell together with a login manager other than GDM, such
    as SDDM or LightDM, the screen will not blank or lock. Additionally,
    switching users without logging out is not possible.
   </para>
   <para>
    To be able to lock the screen from GNOME Shell, enable GDM as your login
    manager:
   </para>
   <procedure>
    <step>
     <para>
      Make sure that the package <package>gdm</package> is installed.
     </para>
    </step>
    <step>
     <para>
      Set GDM as the display manager:
     </para>
<screen><prompt>tux@linux &gt; </prompt><command>sudo update-alternatives --set default-displaymanager \
  /usr/lib/X11/displaymanagers/gdm</command></screen>
    </step>
    <step>
     <para>
      Reboot.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.desktop.sddm-hidpi">
   <!-- boo#1083873, boo#1091103 -->
   <title>Scaling the SDDM UI on Computers with High-DPI Displays</title>
   <para>
    The default login manager for KDE, SDDM, does not scale its UI for High-DPI
    displays by default.
    If you have a computer with a high-DPI display, you can set SDDM to scale
    its UI automatically for the display using the configuration file
    <filename>/etc/sddm.conf</filename>:
   </para>
<screen>
[X11]
EnableHiDPI=true
ServerArguments=-nolisten tcp -dpi <replaceable>DPI_VALUE</replaceable>
</screen>
   <para>
    Replace <replaceable>DPI_VALUE</replaceable> with an appropriate DPI
    value, such as <literal>192</literal>. For best scaling results, use a
    DPI value that is a multiple of the default 96 DPI.
   </para>
  </sect2>

  <sect2 xml:id="sec.desktop.yast-hidpi">
   <!-- bsc#1090240 -->
   <title>Scaling the YaST UI on Computers with High-DPI Displays</title>
   <para>
    YaST does not scale its UI for High-DPI displays by default.
    If you have a computer with a high-DPI display, you can set YaST to scale
    its UI automatically for the display. To do so, set the environment
    variable <literal>QT_AUTO_SCREEN_SCALE_FACTOR=1</literal>.
   </para>
  </sect2>

  <sect2 xml:id="sec.desktop.qt-hidpi">
   <!-- boo#1091103 -->
   <title>Using Automatic Scaling in Qt Applications in Setups Which Mix High-DPI/Regular-DPI Monitors</title>
   <para>
    Qt supports automatic per-monitor scaling on X. It uses the DPI value of
    the virtual X screen to calculate the font size for the primary monitor.
    By default, this value is 96 DPI. It uses the relative DPI of the primary
    monitor to derive font DPI for all other monitors.
   </para>
   <para>
    Two widely used desktops will override this behavior of Qt, therefore this
    note does not apply to them:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      GNOME will set <literal>Xft.dpi</literal> to the configured multiple of
      96 DPI.
     </para>
    </listitem>
    <listitem>
     <para>
      KDE Plasma disables the automatic scaling of Qt and uses a manual
      scaling configuration.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    On other desktops, this behavior of Qt can lead to undesirable situations
    such as the following: If the primary display is High-DPI
    (&gt;= 144 DPI), fonts in Qt applications that request scaling, such as
    VLC, are effectively scaled to half the desired size on all monitors.
    Applications which do not request scaling, such as &yast; (with default
    settings), use the same DPI value on all monitors. Hence, they will look
    smaller on the High-DPI monitor.
   </para>
   <para>
    You can use one of the following workarounds for this issue:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Use a monitor with a regular DPI value as the primary monitor.
      Applications that request scaling are then scaled appropriately on the
      High-DPI monitor.
     </para>
    </listitem>
    <listitem>
     <para>
      Set an appropriate font DPI (<literal>Xft.dpi</literal>). You can do so
      either with the configuration utility of your desktop. Alternatively,
      after every login run the following command:
     </para>
     <screen><prompt>tux@linux &gt; </prompt><command>echo Xft.dpi:<replaceable>DPI_VALUE</replaceable> | xrdb -nocpp -merge</command></screen>
     <para>
      Replace <replaceable>DPI_VALUE</replaceable> with an appropriate DPI
      value for the primary monitor.
     </para>
    </listitem>
   </itemizedlist>
  </sect2>

  <sect2 xml:id="sec.desktop.browser-wayland-screen">
   <!-- boo#1086433, cf. rhbz#1369218 -->
   <title>Screen Sharing Does Not Work in Firefox or Chromium on Wayland</title>
   <para>
    Firefox and Chromium normally allow Web-based tools such as
    videoconferencing applications to share the entire screen or individual
    application windows. This functionality is currently not supported in
    either browser when using a Wayland session.
   </para>
   <para>
    To be able to share your screen in Firefox or Chromium, use an X session
    instead.
   </para>
  </sect2>

  <sect2 xml:id="sec.general.mp3-media">
    <title>Playing MP3 Media Files</title>
    <para>
      The codecs to play MP3 media files
      are shipped as part of the standard repository.
    </para>
    <para>
      To use this decoder in gstreamer-based applications and frameworks,
      such as Rhythmbox or Totem, install the package
      <literal>gstreamer-plugins-ugly</literal>.
    </para>
  </sect2>

  <sect2 xml:id="sec.general.libreoffice.type1">
   <title>No Support for Type-1 Fonts in LibreOffice</title>
   <para>
    LibreOffice 5.3 and higher do not support legacy Type-1 fonts (file extensions
    <filename>.afm</filename> and <filename>.pfb</filename>) anymore. Most
    users should not be affected by this, as current fonts are available
    either in the format TrueType (<filename>.ttf</filename>) or OpenType
    (<filename>.otf</filename>) formats.
   </para>
   <para>
    If you are affected by this, convert Type-1 fonts to a supported format,
    such as TrueType and then use the converted fonts. Conversion is possible
    with the application FontForge (package <package>fontforge</package>) which
    is included in &opensuse;. For information on scripting such conversions,
    see
    <link xlink:href="https://fontforge.github.io/en-US/documentation/scripting/"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec.desktop.freetype-rendering-38">
   <!-- boo#1085372 -->
   <title>FreeType Font Rendering Changes</title>
   <para>
    FreeType 2.6.4 has a new default glyph hinting interpreter (version 38)
    that more closely matches other operating systems but may look
    <quote>more fuzzy</quote> to some. To restore the previous FreeType
    behavior, set the following environment variable at any level
    (system-wide, user-specific, or program-specific) of your choice:
   </para>
   <screen>FREETYPE_PROPERTIES="truetype:interpreter-version=35"</screen>
  </sect2>

  <sect2 xml:id="sec.desktop.plasma-browser">
   <!-- boo#1092494 -->
   <title>Enabling KDE Plasma Browser Integration</title>
   <para>
    Plasma browser integration for Firefox and Chromium/Chrome allows
    monitoring multimedia and downloads using KDE system tools and gives
    quick access to tabs via the <guimenu>Run Command</guimenu> bar of the
    KDE Plasma desktop.
   </para>
   <para>
    The browser integration functionality consists of two parts that need to
    work together:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      The desktop part that can be installed using the system package
      <package>plasma-browser-integration</package>.
     </para>
    </listitem>
    <listitem>
     <para>
      The browser part that needs to be installed from the add-on store of
      your browser:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        Firefox: <link xlink:href="https://addons.mozilla.org/firefox/addon/plasma-integration/"/>
       </para>
      </listitem>
      <listitem>
       <para>
        Chromium/Chrome: <link xlink:href="https://chrome.google.com/webstore/detail/plasma-integration/cimiefiiaegbelhefglklhhakcgmhkai"/>
       </para>
      </listitem>
     </itemizedlist>
    </listitem>
   </itemizedlist>
   <para>
    Note that this functionality is officially still in development and
    &thisversion; ships with an early version of it.
   </para>
  </sect2>


  <sect2 xml:id="sec.general.psgml">
   <!-- boo#1080086 -->
   <title>Loading the Emacs <literal>psgml</literal> Module</title>
   <para>
    Because of conflicts with Emacs modules from the default installation,
    &thisversion; can no longer load the
    <literal>psgml</literal> module automatically. For more information, see
    the file <filename>README</filename> from the package
    <package>psgml</package>.
   </para>
  </sect2>
  <!-- <sect2 xml:id="sec.general.nonoss">
    <title>Non-Oss Repository</title>
    <para>
     After the installation, the non-oss repository is disabled.
    </para>
    <para>
     Enable the <literal>openSUSE-Leap-42.3-Non-Oss</literal> repository using
     YaST or on the command line using zypper:
     <screen><prompt>tux@linux &gt; </prompt><command>sudo zypper mr -e repo-non-oss</command></screen>
    </para>
   </sect2> -->
 </sect1>

<!-- <sect1 xml:id="sec.server">
  <title>Server Software</title>

  <para>
   This section lists changes to server software features in &thisversion;.
  </para>

 </sect1> -->

 <sect1 xml:id="sec.security">
  <title>Security</title>

  <para>
   This section lists changes to security features in &thisversion;.
  </para>

  <sect2 xml:id="sec.package.gpg-key">
   <!-- boo#1102191 -->
   <!-- http://dominique.leuenberger.net/blog/2017/03/zypper-and-rpm-says-warning-unsupported-version-of-key-v3/ -->
   <title>GPG Does Not Support GPG V3 Keys Anymore, Resulting in Zypper/<command>rpm</command> Warnings</title>
   <para>
    &thisflavor; 42.3 shipped with GPG 2.0, while &thisversion; includes GPG
    2.2. In between these GPG versions, support for GPG V3 keys was removed.
    If your system's key database still contains GPG V3 keys, you may
    receive warnings about this when executing Zypper or
    <command>rpm</command> commands, as these commands are checking the
    integrity of the package database. These warnings take the
    form <literal>warning: Unsupported version of key: V3</literal>.
   </para>
   <para>
    Usually, these warnings are benign, as these keys may have been used for
    repositories that are no longer enabled on the system or that have
    since had key updates. However, if these keys are still in active
    use by the upstream repository, they must be replaced as soon as possible:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Package management tools in &thisversion; can no longer use them to
      verify package integrity.
     </para>
    </listitem>
    <listitem>
     <para>
      The keys in themselves are insecure. Hence, even though older package
      management tools will use them to verify integrity of packages, the
      result of this check cannot be trusted anymore.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    To delete such keys, perform the following:
   </para>
   <procedure>
    <step>
     <para>
      Run an <command>rpm</command> command with high verbosity and check its
      output:
     </para>
<screen>
<prompt>tux@linux &gt; </prompt><command>rpm -vv -qf /etc</command>
ufdio: 1 reads, 18883 total bytes in 0.000006 secs
[...]
D: read h# 168 Header sanity check: OK
warning: Unsupported version of key: V3
[...]
</screen>
     <para>
      In the example, header 168 is associated with an outdated
      key&mdash;the warning appears directly after the message that this
      specific header is being checked.
     </para>
    </step>
    <step>
     <para>
      Find out the key number associated with the header:
     </para>
     <screen><prompt>tux@linux &gt; </prompt><command>rpm -q --querybynumber <replaceable>HEADER</replaceable></command></screen>
     <para>
      Replace <replaceable>HEADER</replaceable> with the required header
      number. In the example, that would be <literal>168</literal>.
     </para>
     <para>
      This command returns a key identifier starting with
      <literal>gpg-pubkey-</literal>.
     </para>
    </step>
    <step performance="optional">
     <para>
      Use the key identifier (<replaceable>KEY_ID</replaceable>) to learn
      more about the key:
     </para>
     <screen><prompt>tux@linux &gt; </prompt><command>rpm -qi <replaceable>KEY_ID</replaceable></command></screen>
    </step>
    <step>
     <para>
      Remove the key from the system:
     </para>
     <screen><prompt>tux@linux &gt; </prompt><command>sudo rpm -e <replaceable>KEY_ID</replaceable></command></screen>
    </step>
    <step>
     <para>
      If you continue to see warnings on subsequent uses of package
      management tools, repeat the procedure.
     </para>
    </step>
   </procedure>
  </sect2>

  <sect2 xml:id="sec.general.apparmor-restart">
   <!-- boo#1074097 -->
   <title><command>systemctl stop apparmor</command> Does Not Work</title>
   <para>
    In the past, there could be confusion over the difference between how the
    very similarly named <command>systemctl</command> subcommands
    <literal>reload</literal> and <literal>restart</literal> worked for
    AppArmor:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      <command>systemctl reload apparmor</command> properly reloaded all
      AppArmor profiles. (It was and continues to be the recommended way of
      reloading AppArmor profiles.)
     </para>
    </listitem>
    <listitem>
     <para>
      <command>systemctl restart apparmor</command> meant that
      AppArmor would stop, thereby unloading all AppArmor profiles and then
      restart which left all existing processes unconfined. Only newly
      started processes would then be confined again.
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Unfortunately, <systemitem>systemd</systemitem> does
    not provide a solution within its unit file format for the issue posed
    by the <literal>restart</literal> scenario.
   </para>
   <para>
    Starting with AppArmor 2.12, the command
    <command>systemctl stop apparmor</command> will not work.
    As a consequence, <command>systemctl restart apparmor</command> will now
    correctly reload AppArmor profiles.
   </para>
   <para>
    To unload all AppArmor profiles, use the new command
    <command>aa-teardown</command> instead which matches the previous
    behavior of <command>systemctl stop apparmor</command>.
   </para>
   <para>
    For more information, see
    <link xlink:href="https://bugzilla.opensuse.org/show_bug.cgi?id=996520"/>
    and
    <link xlink:href="https://bugzilla.opensuse.org/show_bug.cgi?id=853019"/>.
   </para>
  </sect2>
 </sect1>

 <sect1 xml:id="sec.technical">
  <title>Technical</title>
  <para/>

  <sect2 xml:id="sec.technical.btrfs-layout">
   <!-- boo#1085628 -->
   <title>Updated Btrfs Subvolume Layout</title>
   <para>
    &thisflavor; 15.0 introduces a new default Btrfs subvolume layout that
    aims for the following:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Simplified snapshots and rollbacks
     </para>
    </listitem>
    <listitem>
     <para>
      Prevention of accidental data loss
     </para>
    </listitem>
    <listitem>
     <para>
      Better performance of databases and VM images stored in
      <filename>/var</filename>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    Instead of using multiple Btrfs subvolumes for different subdirectories of
    <filename>/var</filename>, &thisversion; ships with a single subvolume
    for all of <filename>/var</filename>. This new subvolume has
    copy-on-write functionality disabled.
   </para>
   <para>
    There is no defined way of upgrading to this new Btrfs subvolume layout.
    Therefore, if you want to take advantage of it, make sure to freshly
    install &thisversion; instead of upgrading.
   </para>
   <para>
    For more information on the default Btrfs subvolume layout before and
    after this change, see
    <link xlink:href="https://en.opensuse.org/SDB:BTRFS"/>.
   </para>
  </sect2>

  <sect2 xml:id="sec.technical.wicked-rfc4361">
   <!-- requested via boo#1095111, copy of FATE#323576 -->
   <title>Wicked: Using RFC 4361 DHCPv4 <literal>client-id</literal> on Ethernet</title>
   <para>
    RFC 4361 updates the <literal>client-id</literal> defined in RFC 2132,
    section 9.14 to be compatible with DHCP 6
    <literal>client-id</literal> (<literal>duid</literal>).
    The use of an RFC 4361 is mandatory on Infiniband (RFC 4390) and is also
    required to perform DNS record updates in the same zone for DHCP 4 and
    DHCP 6 addresses also on Ethernet.
   </para>
   <para>In &thisversion;:</para>
   <itemizedlist>
    <listitem>
     <para>
      ISC DHCP 4.3.x server supports the new RFC 4361 (required for DNS update)
     </para>
    </listitem>
    <listitem>
     <para>
      Wicked provides an option to send such a
      <literal>client-id</literal> and to automatically use a DHCPv6-based
      <literal>client-id</literal> in DHCPv4 (used on Infiniband).
     </para>
    </listitem>
   </itemizedlist>
   <para>
    To send the <literal>client-id</literal> during the installation, use
    <literal>linuxrc</literal> (also see
    <link xlink:href="https://en.opensuse.org/SDB:Linuxrc"/>)
    with the following <literal>ifcfg</literal>:
   </para>
   <screen><?dbsuse-fo font-size="0.65em"?>ifcfg=eth0=dhcp,DHCLIENT_CLIENT_ID=01:03:52:54:00:02:c2:67,DHCLIENT6_CLIENT_ID=00:03:52:54:00:02:c2:67</screen>
   <para>
    For more information, see the documentation for the options
    <literal>dhcp4 &quot;create-cid&quot;</literal>,
    <literal>dhcp6 &quot;default-duid&quot;</literal> in
    <literal>man 5 wicked-config</literal>,
    <literal>wicked duid --help</literal>, and
    <literal>wicked iaid --help</literal>.
   </para>
   <para>
    The traditionally used RFC 2132 DHCPv4 <literal>client-id</literal>
    on Ethernet is constructed from the hardware type (<literal>01</literal>
    for Ethernet) and followed by the hardware address (the MAC address), for
    example:
   </para>
   <screen>01:52:54:00:02:c2:67</screen>
   <para>
     The RFC 4361 <literal>client-id</literal> starts with
     <literal>0xff</literal> (instead of the hardware type), followed by the
     DHCPv6 IAID (the interface-address association ID that describes the
     interface on the machine), followed by the DHCPv6 DUID
     (<literal>client-id</literal> which identifies the machine).
   </para>
   <para>
    Using the above hardware type-based and hardware address-based DUID (LLT
    type used by default), the new RFC 4361 DHCPv4
    <literal>client-id</literal> would be:
   </para>
   <itemizedlist>
    <listitem>
     <para>
      Using the last bytes of the MAC address as the IAID:
      <literal>ff:00:02:c2:67:00:01:xx:xx:xx:xx:52:54:00:02:c2:67</literal>
     </para>
    </listitem>
    <listitem>
     <para>
      When the IAID is a simple incremented number:
      <literal>ff:00:00:00:01:00:01:xx:xx:xx:xx:52:54:00:02:c2:67</literal>
     </para>
    </listitem>
   </itemizedlist>
   <para>
    The <literal>xx:xx:xx:xx</literal> in the DUID-LLT is a creation
    timestamp. A DUID-LL
    (<literal>00:03:00:01:<replaceable>MAC</replaceable></literal>) does not
    have a timestamp.
   </para>
  </sect2>

 </sect1>

 <!-- <sect1 xml:id="misc">
  <title>Miscellaneous</title>
  <para/>
 </sect1> -->

 <sect1 xml:id="feedback">
  <title>More Information and Feedback</title>
  <itemizedlist>
   <listitem>
    <para>
     Read the <filename>README</filename> documents on the medium.
    </para>
   </listitem>
   <listitem>
    <para>
     View a detailed changelog information about a particular package from its
     RPM:
    </para>
    <screen><prompt>tux@linux &gt; </prompt><command>rpm --changelog -qp <replaceable>FILENAME</replaceable>.rpm</command></screen>
    <para>
     Replace <replaceable>FILENAME</replaceable> with the name of the RPM.
    </para>
   </listitem>
   <listitem>
    <para>
     Check the <filename>ChangeLog</filename> file in the top level of the
     medium for a chronological log of all changes made to the updated packages.
    </para>
   </listitem>
   <listitem>
    <para>
     Find more information in the <filename>docu</filename> directory on the
     medium.
    </para>
   </listitem>
   <listitem>
    <para>
     For additional or updated documentation, see
     <link xlink:href="https://doc.opensuse.org/"/>.
    </para>
   </listitem>
   <listitem>
    <para>
     For the latest product news, from &opensuse;, visit
     <link xlink:href="https://www.opensuse.org"/>.
    </para>
   </listitem>
  </itemizedlist>

  <para>
   Copyright © <?dbtimestamp format="Y" ?> SUSE LLC
  </para>

 </sect1>
</article>
